<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>07.Check If Integer Is Prime</title>
    <link href="styles/StyleSheet3.less" rel="stylesheet" />
</head>
<body>
    <!--Write an expression that checks if given positive integer number n
        (n ≤ 100) is prime. E.g. 37 is prime.-->

    <div id="wrapper">
        <form name="forms">
            <p>Enter number to check if it is prime.</p>
            <label for="first">Number: </label>
            <input type="text" id="first" />
            <a href="#" onclick="onButtonClick()">Check if prime</a>
        </form>
    </div>
    <div id="results">
        <p id="result"></p>
    </div>
    <script type="text/javascript">
        function onButtonClick() {
            var n = document.forms.first.value;
            // function isPrime(n) returns:
            // - false if n is NaN or not a finite integer
            // - true  if n is prime
            // - false otherwise
            isPrime = function (n) {
                if (isNaN(n) || !isFinite(n) || n % 1 || n < 2) return false;
                if (n == leastFactor(n)) return true;
                return false;
            }
            // function leastFactor(n) returns:
            // * the smallest prime that divides n
            // * NaN if n is NaN or Infinity
            // *  0  if n is 0
            // *  1  if n=1, n=-1, or n is not an integer
            leastFactor = function (n) {
                if (isNaN(n) || !isFinite(n)) return NaN;
                if (n == 0) return 0;
                if (n % 1 || n * n < 2) return 1;
                if (n % 2 == 0) return 2;
                if (n % 3 == 0) return 3;
                if (n % 5 == 0) return 5;
                var m = Math.sqrt(n);
                for (var i = 7; i <= m; i += 30) {
                    if (n % i == 0) return i;
                    if (n % (i + 4) == 0) return i + 4;
                    if (n % (i + 6) == 0) return i + 6;
                    if (n % (i + 10) == 0) return i + 10;
                    if (n % (i + 12) == 0) return i + 12;
                    if (n % (i + 16) == 0) return i + 16;
                    if (n % (i + 22) == 0) return i + 22;
                    if (n % (i + 24) == 0) return i + 24;
                }
                return n;
            }
            document.getElementById('result').innerHTML =
                (isPrime(n) > 0 ?
                "Number is Prime" :
                "Number is NOT Prime");
        }
        // Algorithm from here:
        // http://www.javascripter.net/faq/numberisprime.htm
    </script>
</body>
</html>
